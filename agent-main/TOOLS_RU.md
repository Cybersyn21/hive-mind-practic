# Поддерживаемые инструменты

В этом документе перечислены все инструменты, поддерживаемые `@link-assistant/agent`. Все инструменты включены по умолчанию и производят вывод в формате JSON, совместимом с OpenCode.

> ⚠️ **Только для Bun** - Этот пакет требует [Bun](https://bun.sh) и НЕ поддерживает Node.js или Deno.

## Операции с файлами

### read
Читает содержимое файлов из файловой системы.

**Статус:** ✅ Полностью поддерживается и протестировано
**Тест:** [tests/read.tools.test.js](tests/read.tools.test.js)

### write
Записывает содержимое в файлы файловой системы.

**Статус:** ✅ Полностью поддерживается и протестировано
**Тест:** [tests/write.tools.test.js](tests/write.tools.test.js)

### edit
Выполняет точные замены строк в файлах.

**Статус:** ✅ Полностью поддерживается и протестировано
**Тест:** [tests/edit.tools.test.js](tests/edit.tools.test.js)

### list (ls)
Отображает список файлов и директорий.

**Статус:** ✅ Полностью поддерживается и протестировано
**Тест:** [tests/list.tools.test.js](tests/list.tools.test.js)

## Инструменты поиска

### glob
Быстрый инструмент для сопоставления файлов по шаблонам, работающий с кодовыми базами любого размера. Поддерживает glob-шаблоны, такие как `**/*.js` или `src/**/*.ts`.

**Статус:** ✅ Полностью поддерживается и протестировано
**Тест:** [tests/glob.tools.test.js](tests/glob.tools.test.js)

### grep
Мощный инструмент поиска, созданный на основе ripgrep. Поддерживает полный синтаксис регулярных выражений и может фильтровать по типу файла или glob-шаблону.

**Статус:** ✅ Полностью поддерживается и протестировано
**Тест:** [tests/grep.tools.test.js](tests/grep.tools.test.js)

### websearch
Выполняет поиск в интернете с использованием API Exa для получения актуальной информации. Всегда включен, переменные окружения не требуются.

**Статус:** ✅ Полностью поддерживается и протестировано
**Тест:** [tests/websearch.tools.test.js](tests/websearch.tools.test.js)
**Совместимость с OpenCode:** ✅ 100% совместимо

### codesearch
Выполняет поиск в репозиториях кода и документации с использованием API Exa. Всегда включен.

**Статус:** ✅ Полностью поддерживается и протестировано
**Тест:** [tests/codesearch.tools.test.js](tests/codesearch.tools.test.js)
**Совместимость с OpenCode:** ✅ 100% совместимо

## Инструменты выполнения

### bash
Выполняет bash-команды в постоянной сессии оболочки с опциональным тайм-аутом.

**Статус:** ✅ Полностью поддерживается и протестировано
**Тест:** [tests/bash.tools.test.js](tests/bash.tools.test.js)

### batch
Объединяет несколько вызовов инструментов для оптимальной производительности. Выполняет несколько инструментов в одной операции. Всегда включен.

**Статус:** ✅ Полностью поддерживается и протестировано
**Тест:** [tests/batch.tools.test.js](tests/batch.tools.test.js)

### task
Запускает специализированных агентов для автономной обработки сложных многошаговых задач.

**Статус:** ✅ Полностью поддерживается и протестировано
**Тест:** [tests/task.tools.test.js](tests/task.tools.test.js)

## Вспомогательные инструменты

### todo (todowrite/todoread)
Читает и записывает элементы TODO для отслеживания задач во время выполнения.

**Статус:** ✅ Полностью поддерживается и протестировано
**Тест:** [tests/todo.tools.test.js](tests/todo.tools.test.js)

### webfetch
Загружает содержимое с указанного URL и обрабатывает его с помощью модели искусственного интеллекта.

**Статус:** ✅ Полностью поддерживается и протестировано
**Тест:** [tests/webfetch.tools.test.js](tests/webfetch.tools.test.js)

## Тестирование

### Запуск всех тестов инструментов
```bash
bun test tests/*.tools.test.js
```

### Запуск теста конкретного инструмента
```bash
bun test tests/bash.tools.test.js
bun test tests/websearch.tools.test.js
```

### Охват тестами
Каждый тест инструмента проверяет:
- ✅ Правильность структуры вывода JSON
- ✅ Совместимость с OpenCode (где применимо)
- ✅ Правильную обработку входных и выходных данных
- ✅ Обработку ошибок

## Ключевые возможности

### Не требует конфигурации
- Все инструменты работают без переменных окружения или файлов конфигурации
- WebSearch и CodeSearch работают без `OPENCODE_EXPERIMENTAL_EXA`
- Инструмент batch всегда включен, экспериментальный флаг не требуется

### Совместимость с OpenCode
- Все инструменты производят выход JSON, совместимый с форматом OpenCode
- Инструменты WebSearch и CodeSearch на 100% совместимы с выходом OpenCode
- Структура событий инструментов соответствует спецификациям OpenCode

### Поддержка простого текстового ввода
`@link-assistant/agent` также принимает простой текстовый ввод (не только JSON):

```bash
echo "hello world" | agent
```

Простой текст автоматически преобразуется в запрос сообщения.
