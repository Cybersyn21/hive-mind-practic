# Каталог src/ — Исходный код

## Описание

Каталог `src/` содержит основной исходный код Hive Mind — все скрипты для решения issues, оркестрации, Telegram бота и интеграций.

## Основные скрипты

### solve.mjs
**Статус**: Стабильный

**Назначение**: Автоматическое решение GitHub issues с помощью AI.

**Функциональность**:
- Анализ issue на GitHub
- Автоматическое форкирование (если нет прав)
- Создание ветки для работы
- Запуск AI-агента для решения
- Создание Draft PR с решением
- Обработка обратной связи

**Основные опции**:
- `--model` — выбор модели (sonnet, opus, haiku)
- `--tool` — выбор инструмента (claude, opencode, codex, agent)
- `--auto-fork` — автоматический fork для публичных репо
- `--auto-continue` — продолжение работы над существующим PR
- `--attach-logs` — прикрепление логов к PR
- `--verbose` — подробный вывод
- `--think` — уровень размышлений (low, medium, high, max)

### hive.mjs
**Статус**: Стабильный

**Назначение**: Оркестрация множества AI-агентов для решения issues.

**Функциональность**:
- Мониторинг репозиториев
- Управление очередью issues
- Параллельный запуск агентов
- Балансировка нагрузки
- Автоматический перезапуск

**Основные опции**:
- `--monitor-tag` — метка для отслеживания
- `--all-issues` — все issues (без фильтра по меткам)
- `--concurrency` — количество параллельных агентов
- `--interval` — интервал проверки (секунды)
- `--max-issues` — лимит обрабатываемых issues

### telegram-bot.mjs
**Статус**: Стабильный

**Назначение**: Telegram интерфейс для управления Hive Mind.

**Команды**:
- `/solve <url>` — решить issue
- `/hive <url>` — запустить оркестрацию
- `/help` — справка и ID чата

**Конфигурация**:
- `TELEGRAM_BOT_TOKEN` — токен от @BotFather
- `TELEGRAM_ALLOWED_CHATS` — список разрешённых чатов
- `TELEGRAM_BOT_VERBOSE` — подробный вывод

### task.mjs
**Назначение**: Запуск отдельных задач.

### review.mjs
**Статус**: Альфа

**Назначение**: Автоматизация code review.

### start-screen.mjs
**Назначение**: Запуск процессов в screen сессиях.

## Каталог youtrack/

Интеграция с JetBrains YouTrack для управления задачами.

## Архитектура

```
┌─────────────────────────────────────────────────────────────┐
│                    Точка входа                               │
│         (hive.mjs / solve.mjs / telegram-bot.mjs)           │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                   Конфигурация                               │
│         (Парсинг аргументов, валидация)                     │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                   GitHub API                                 │
│     (Получение issues, создание веток, PR)                  │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                   AI-агент                                   │
│     (Claude Code / OpenCode / Codex / Agent)                │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                   Результат                                  │
│         (Коммиты, PR, комментарии)                          │
└─────────────────────────────────────────────────────────────┘
```

## Зависимости

```javascript
// Основные зависимости (package.json)
{
  "dependencies": {
    "@sentry/node": "^10.15.0",         // Отслеживание ошибок
    "@sentry/profiling-node": "^10.15.0" // Профилирование
  }
}
```

Внешние зависимости (должны быть установлены):
- `gh` — GitHub CLI
- `claude` — Claude Code CLI
- `opencode` — OpenCode CLI (опционально)
- `codex` — Codex CLI (опционально)
- `agent` — @link-assistant/agent (опционально)
